<div class="overview-page">
  <div class="item" *ngFor="let item of this.itemService.filteredItems ">
    <img src="{{'data:image/jpg;base64,' + item.picture1Base64}}"/>
    <h2>{{ item.title }}</h2>
    <p>{{ item.description }}</p>
    <!--    <button (click)="showItemInfo()">View Item</button>-->
    <button class="submit-btn" (click)="showItemInfo(item)">View Item</button>
  </div>
</div>
<div class="popup" [ngClass]="{'show': isPageLoaded && (showItemInformation || cardService.getCheckoutStatus())}">

  <div class="center">
    <button id="close" (click)="closeItemInfo()">X</button>
    <div *ngIf="isPageLoaded" class="item-page" [class.flipped]="isFlipped">

      <div class="item-front" *ngIf="showItemInformation">
        <h1>{{this.selectedItem?.title}}</h1>

        <!-- Three pictures in one line -->
        <div class="picture-container">
          <img src="{{'data:image/jpg;base64,' + selectedItem?.picture1Base64}}"/>
          <img src="{{'data:image/jpg;base64,' + selectedItem?.picture2Base64}}"/>
          <img src="{{'data:image/jpg;base64,' + selectedItem?.picture3Base64}}"/>
        </div>
        <div class="description-container">
          <p>{{this.selectedItem?.description}}</p>
        </div>
        <div class="price-info">
          <p>Price per day: {{this.selectedItem?.pricePerDay}} лв.</p>

          <p *ngIf="dateFormControl.value && selectedItem">Total
            price: {{this.calculateDaysInRange(dateFormControl.value[0], dateFormControl.value[1]) * selectedItem.pricePerDay}}
            лв.</p>
        </div>

        <!-- Button to show the reservation calendar -->

        <div class="container">
          <div class="row">
            <div class="col-xs-12 col-12 col-md-4 form-group">
              <input
                [formControl]="dateFormControl"
                type="text"
                placeholder="Datepicker"
                class="form-control"
                bsDaterangepicker
                [bsConfig]="{ isAnimated: true , datesDisabled: disableDates(selectedItem)}">
            </div>
          </div>
        </div>

        <!--        TODO fix disabled button-->
        <button id="reserveButton1" [disabled]="(userService.user$ | async) === undefined" (click)="reserve()">Reserve
        </button>
      </div>

      <div class="item-front" *ngIf="cardService.getCheckoutStatus()">
        <div id="booking" class="section">
          <div class="section-center">
            <div class="container">
              <div class="row">
                <div class="booking-cta">
                  <h1>Make your reservation</h1>
                </div>
                <div>
                  <div class="booking-form">
                    <form>
                      <div class="form-group">
                        <span class="form-label">Your Names</span>
                        <input class="form-control" type="text" placeholder="Enter a destination or hotel name">
                      </div>
                      <div class="row">
                        <div class="col-sm-6">
                          <div class="form-group">
                            <span class="form-label">Town</span>
                            <input class="form-control" required>
                          </div>
                        </div>
                        <div class="col-sm-6">
                          <div class="form-group">
                            <span class="form-label">Phone</span>
                            <input class="form-control" required/>
                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-sm-8">
<!--                          <div class="form-group">-->
<!--                            <span class="form-label">Dates</span>-->
<!--                            &lt;!&ndash;                            <input class="form-control" type="date" required>&ndash;&gt;-->
<!--                            <div class="form-group">-->
<!--                            </div>-->

<!--                          </div>-->
                          <div class="col-sm-4">
                            <div class="form-group">
                              <span class="form-label">Price</span>
                              <input class="form-control" required disabled [value]="cardService.getTotalPrice()">
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-sm-4">
                          <div class="form-group">
                            <span class="form-label">Card number</span>
                            <input class="form-control" type="tel" inputmode="numeric" pattern="[0-9\s]{13,19}"
                                   autocomplete="cc-number" maxlength="19" placeholder="xxxx xxxx xxxx xxxx"
                                   required>
                            <span class="select-arrow"></span>
                          </div>
                        </div>
                        <div class="col-sm-4">
                          <div class="form-group">
                            <span class="form-label">Expiration Date</span>
                            <input class="form-control" maxlength="7" placeholder="mm/yyyy" required/>
                          </div>
                        </div>
                        <div class="col-sm-4">
                          <div class="form-group">
                            <span class="form-label">CVV</span>
                            <input class="form-control" maxlength="3" placeholder="XXX" required/>

                            <span class="select-arrow"></span>
                          </div>
                        </div>
                      </div>
                      <div class="form-btn">
                        <button class="submit-btn" (click)="checkout()">Checkout</button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
